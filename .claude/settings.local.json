{
  "permissions": {
    "allow": [
      "Bash(cat summary_20251211_0758*.json summary_20251211_0759*.json)",
      "Bash(cat \"C:\\\\Users\\\\Manu\\\\Documents\\\\Development\\\\ftxbot\\\\backtest_results\\\\summary_20251222_090724.json\")",
      "Bash(cat \"C:\\\\Users\\\\Manu\\\\Documents\\\\Development\\\\ftxbot\\\\backtest_results\\\\summary_20251222_090617.json\")",
      "Bash(cat \"C:\\\\Users\\\\Manu\\\\Documents\\\\Development\\\\ftxbot\\\\backtest_results\\\\summary_20251222_090638.json\")",
      "Bash(done)",
      "Bash(python -c \"\nimport pandas as pd\nfrom pathlib import Path\n\n# Compare a winner vs a loser\ndef analyze_trades\\(symbol\\):\n    files = list\\(Path\\(''C:/Users/Manu/Documents/Development/ftxbot/backtest_results''\\).glob\\(f''trades_*.csv''\\)\\)\n    for f in files:\n        df = pd.read_csv\\(f\\)\n        if len\\(df\\) > 0 and df[''symbol''].iloc[0] == symbol:\n            print\\(f''=== {symbol} ===''\\)\n            print\\(f''Total trades: {len\\(df\\)}''\\)\n            \n            # SL vs TP breakdown\n            sl_count = len\\(df[df[''status''] == ''CLOSED_SL'']\\)\n            tp_count = len\\(df[df[''status''] == ''CLOSED_TP'']\\)\n            print\\(f''TP hits: {tp_count} \\({tp_count/len\\(df\\)*100:.1f}%\\)''\\)\n            print\\(f''SL hits: {sl_count} \\({sl_count/len\\(df\\)*100:.1f}%\\)''\\)\n            \n            # Average pips won/lost\n            winners = df[df[''pnl''] > 0][''pnl_pips'']\n            losers = df[df[''pnl''] <= 0][''pnl_pips'']\n            print\\(f''Avg win: {winners.mean\\(\\):.1f} pips''\\)\n            print\\(f''Avg loss: {losers.mean\\(\\):.1f} pips''\\)\n            \n            # Direction breakdown\n            buys = df[df[''direction''] == ''BUY'']\n            sells = df[df[''direction''] == ''SELL'']\n            buy_wins = len\\(buys[buys[''pnl''] > 0]\\)\n            sell_wins = len\\(sells[sells[''pnl''] > 0]\\)\n            print\\(f''BUY trades: {len\\(buys\\)}, wins: {buy_wins} \\({buy_wins/len\\(buys\\)*100 if len\\(buys\\) > 0 else 0:.1f}%\\)''\\)\n            print\\(f''SELL trades: {len\\(sells\\)}, wins: {sell_wins} \\({sell_wins/len\\(sells\\)*100 if len\\(sells\\) > 0 else 0:.1f}%\\)''\\)\n            \n            # Look at consecutive losses\n            df[''is_loss''] = df[''pnl''] <= 0\n            max_consec_loss = 0\n            current = 0\n            for loss in df[''is_loss'']:\n                if loss:\n                    current += 1\n                    max_consec_loss = max\\(max_consec_loss, current\\)\n                else:\n                    current = 0\n            print\\(f''Max consecutive losses: {max_consec_loss}''\\)\n            print\\(\\)\n            return\n\n# Analyze best and worst\nfor sym in [''NZDJPY'', ''GBPAUD'', ''AUDCAD'', ''GBPJPY'', ''EURCHF'']:\n    analyze_trades\\(sym\\)\n\")",
      "Bash(python -c \"\nimport pandas as pd\nfrom pathlib import Path\n\ndef analyze_rr\\(symbol\\):\n    files = list\\(Path\\(''C:/Users/Manu/Documents/Development/ftxbot/backtest_results''\\).glob\\(f''trades_*.csv''\\)\\)\n    for f in files:\n        df = pd.read_csv\\(f\\)\n        if len\\(df\\) > 0 and df[''symbol''].iloc[0] == symbol:\n            print\\(f''=== {symbol} ===''\\)\n            \n            # Calculate intended SL and TP distances\n            df[''sl_dist''] = abs\\(df[''entry_price''] - df[''stop_loss'']\\)\n            df[''tp_dist''] = abs\\(df[''take_profit''] - df[''entry_price'']\\)\n            df[''intended_rr''] = df[''tp_dist''] / df[''sl_dist'']\n            \n            print\\(f''Intended R:R avg: {df[\"\"intended_rr\"\"].mean\\(\\):.2f}''\\)\n            print\\(f''Intended R:R min: {df[\"\"intended_rr\"\"].min\\(\\):.2f}''\\)\n            print\\(f''Intended R:R max: {df[\"\"intended_rr\"\"].max\\(\\):.2f}''\\)\n            \n            # Check SL distances in pips \\(need to know pip size\\)\n            # For JPY pairs pip = 0.01, for others pip = 0.0001\n            if ''JPY'' in symbol:\n                pip = 0.01\n            elif ''XAU'' in symbol:\n                pip = 0.01\n            else:\n                pip = 0.0001\n            \n            df[''sl_pips''] = df[''sl_dist''] / pip\n            df[''tp_pips''] = df[''tp_dist''] / pip\n            \n            print\\(f''Avg SL: {df[\"\"sl_pips\"\"].mean\\(\\):.1f} pips''\\)\n            print\\(f''Avg TP: {df[\"\"tp_pips\"\"].mean\\(\\):.1f} pips''\\)\n            print\\(f''Min SL: {df[\"\"sl_pips\"\"].min\\(\\):.1f} pips''\\)\n            print\\(f''Max SL: {df[\"\"sl_pips\"\"].max\\(\\):.1f} pips''\\)\n            \n            # Look at trade duration for losses vs wins\n            df[''entry_time''] = pd.to_datetime\\(df[''entry_time'']\\)\n            df[''exit_time''] = pd.to_datetime\\(df[''exit_time'']\\)\n            df[''duration_hours''] = \\(df[''exit_time''] - df[''entry_time'']\\).dt.total_seconds\\(\\) / 3600\n            \n            winners = df[df[''pnl''] > 0]\n            losers = df[df[''pnl''] <= 0]\n            print\\(f''Avg duration \\(wins\\): {winners[\"\"duration_hours\"\"].mean\\(\\):.1f} hours''\\)\n            print\\(f''Avg duration \\(losses\\): {losers[\"\"duration_hours\"\"].mean\\(\\):.1f} hours''\\)\n            print\\(\\)\n            return\n\nfor sym in [''NZDJPY'', ''GBPAUD'', ''AUDCAD'', ''GBPJPY'', ''EURCHF'']:\n    analyze_rr\\(sym\\)\n\")",
      "Bash(python -c \"\nimport pandas as pd\nfrom pathlib import Path\n\ndef analyze_price_behavior\\(symbol\\):\n    files = list\\(Path\\(''C:/Users/Manu/Documents/Development/ftxbot/backtest_results''\\).glob\\(f''trades_*.csv''\\)\\)\n    for f in files:\n        df = pd.read_csv\\(f\\)\n        if len\\(df\\) > 0 and df[''symbol''].iloc[0] == symbol:\n            print\\(f''=== {symbol} ===''\\)\n            \n            # For losing trades, how far did price go in the right direction before reversing?\n            losers = df[df[''status''] == ''CLOSED_SL''].copy\\(\\)\n            \n            if ''JPY'' in symbol:\n                pip = 0.01\n            else:\n                pip = 0.0001\n            \n            losers[''sl_dist''] = abs\\(losers[''entry_price''] - losers[''stop_loss'']\\) / pip\n            losers[''tp_dist''] = abs\\(losers[''take_profit''] - losers[''entry_price'']\\) / pip\n            \n            # The actual loss pips vs intended SL\n            # If actual loss < intended SL, trade closed early\n            # If actual loss == intended SL, hit full SL\n            losers[''loss_pips''] = abs\\(losers[''pnl_pips'']\\)\n            losers[''sl_efficiency''] = losers[''loss_pips''] / losers[''sl_dist'']  # 1.0 = full SL hit\n            \n            print\\(f''Losing trades: {len\\(losers\\)}''\\)\n            print\\(f''Avg loss vs SL: {losers[\"\"sl_efficiency\"\"].mean\\(\\):.2f} \\(1.0 = full SL\\)''\\)\n            print\\(f''Trades with full SL hit \\(>0.95\\): {len\\(losers[losers[\"\"sl_efficiency\"\"] > 0.95]\\)}''\\)\n            \n            # How many losing trades had loss bigger than SL? \\(slippage\\)\n            print\\(f''Trades with loss > SL: {len\\(losers[losers[\"\"sl_efficiency\"\"] > 1.05]\\)}''\\)\n            \n            # Check for trades that almost made it to TP then reversed\n            # A trade that goes 50%+ toward TP before reversing is a ''runner that failed''\n            \n            print\\(\\)\n            return\n\nfor sym in [''NZDJPY'', ''GBPAUD'', ''AUDCAD'', ''GBPJPY'', ''EURCHF'']:\n    analyze_price_behavior\\(sym\\)\n\")",
      "Bash(python -c \"\nimport pandas as pd\nfrom pathlib import Path\nimport json\n\nresults = []\nfor f in Path\\(''C:/Users/Manu/Documents/Development/ftxbot/backtest_results''\\).glob\\(''summary_*.json''\\):\n    data = json.loads\\(f.read_text\\(\\)\\)\n    symbol = data[''config''][''symbols''][0]\n    results.append\\({\n        ''symbol'': symbol,\n        ''trades'': data[''total_trades''],\n        ''win_rate'': data[''win_rate''],\n        ''pf'': data[''profit_factor''],\n        ''net'': data[''net_profit'']\n    }\\)\n\n# Calculate trades per month \\(1 year backtest period\\)\nprint\\(''Pair Characteristics Analysis''\\)\nprint\\(''=''*60\\)\nprint\\(f''{\"\"Symbol\"\":<10} {\"\"Trades\"\":<8} {\"\"Trades/Mo\"\":<10} {\"\"WinRate\"\":<8} {\"\"Verdict\"\"}''\\)\nprint\\(''-''*60\\)\n\n# Categorize by currency composition\njpy_pairs = []\ncommodity_cross = []\neur_range = []\ngbp_cross = []\n\nfor r in sorted\\(results, key=lambda x: x[''net''], reverse=True\\):\n    tpm = r[''trades''] / 12\n    sym = r[''symbol'']\n    \n    # Categorize\n    if ''JPY'' in sym:\n        cat = ''JPY-cross''\n    elif sym in [''AUDCAD'', ''AUDNZD'', ''NZDUSD'']:\n        cat = ''Commodity''  \n    elif sym in [''EURCHF'', ''EURGBP'']:\n        cat = ''EUR-range''\n    elif ''GBP'' in sym:\n        cat = ''GBP-cross''\n    elif ''USD'' in sym:\n        cat = ''USD-major''\n    else:\n        cat = ''Other''\n    \n    status = ''WIN'' if r[''net''] > 0 else ''LOSE''\n    \n    # Analysis\n    if r[''trades''] > 100 and r[''win_rate''] < 0.35:\n        note = ''OVERTRADING + LOW WR''\n    elif r[''win_rate''] < 0.30:\n        note = ''TOO MANY FALSE BREAKOUTS''\n    elif r[''pf''] > 1.5:\n        note = ''GOOD TRENDS''\n    elif r[''pf''] > 1.0:\n        note = ''MARGINAL''\n    else:\n        note = ''MEAN REVERTS''\n        \n    print\\(f''{sym:<10} {r[\"\"trades\"\"]:<8} {tpm:<10.1f} {r[\"\"win_rate\"\"]*100:<7.1f}% {note}''\\)\n\")"
    ],
    "deny": [],
    "ask": []
  }
}
